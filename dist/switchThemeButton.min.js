/*!
 *   switchThemeButton.js
 * See {@link https://github.com/dettalant/switchThemeButton}
 *
 * @author dettalant
 * @version v0.2.2
 * @license MIT License
 */
var switchThemeButton=function(){"use strict";function o(t){this.message=t,this.name="SwitchThemeButtonError"}o.prototype.toString=function(){return this.name+": "+this.message};function t(t){var e=this;if(this.currentThemeIdx=0,this.buttonCallback=function(){},this.customButtonCallback=function(){},this.states={isCustomTheme:!1},void 0===t)throw new o("インスタンス生成には初期化引数が必須です");if(0===t.themeNameArray.length)throw new o("初期化引数のthemeNameArrayに有効な値が指定されていません");if(!(t.buttonEl instanceof HTMLElement))throw new o("初期化引数のbuttonElがHTMLElementではありません");if(!(t.customButtonEl instanceof HTMLElement))throw new o("初期化引数のcustomButtonElがHTMLElementではありません");this.themeNameArray=t.themeNameArray,this.buttonEl=t.buttonEl,this.customButtonEl=t.customButtonEl,this.defaultThemeApply(),this.loadCustomThemeSetting(t.isDefaultCustomTheme),void 0!==t.buttonCallback&&(this.buttonCallback=t.buttonCallback.bind(this)),this.buttonCallback(),void 0!==t.customButtonCallback&&(this.customButtonCallback=t.customButtonCallback.bind(this)),this.customButtonCallback(),this.buttonEl.addEventListener("click",function(){e.switchThemeInOrder(),e.buttonCallback()}),this.customButtonEl.addEventListener("click",function(){e.isCustomTheme=!e.isCustomTheme,e.customButtonCallback()})}var n="stb_currentThemeName",s="stb_isCustomTheme",e={isCustomTheme:{configurable:!0},currentThemeName:{configurable:!0}};return t.prototype.switchThemeInOrder=function(){for(var t=document.body.className,e=this.themeNameArray.length,o=0;o<e;o++){var s=this.themeNameArray[o];if(-1!==t.indexOf(s)){var m=o+1===e?0:o+1;this.currentThemeIdx=m,document.body.classList.remove(s),document.body.classList.add(this.currentThemeName),window.localStorage.setItem(n,this.currentThemeName);break}}},e.isCustomTheme.get=function(){return this.states.isCustomTheme},e.isCustomTheme.set=function(t){(this.states.isCustomTheme=t)?(document.body.classList.add("is_custom_theme"),window.localStorage.setItem(s,"true")):(document.body.classList.remove("is_custom_theme"),window.localStorage.setItem(s,"false"))},t.prototype.defaultThemeApply=function(){var t=window.localStorage.getItem(n);if(null!==t&&""!==t){var e=this.themeNameArray.indexOf(t);if(-1!==e)return this.currentThemeIdx=e,this.removeThemeNameAll(),void document.body.classList.add(this.currentThemeName);window.localStorage.setItem(n,"")}var o=this.getBodyDefaultThemeIdx();-1!==o?this.currentThemeIdx=o:document.body.classList.add(this.themeNameArray[0])},t.prototype.loadCustomThemeSetting=function(t){var e=localStorage.getItem(s);(null!==e&&"true"===e||null===e&&t)&&(this.isCustomTheme=!0)},t.prototype.removeThemeNameAll=function(){for(var t=this.themeNameArray.length,e=0;e<t;e++){var o=this.themeNameArray[e];document.body.classList.remove(o)}},t.prototype.getBodyDefaultThemeIdx=function(){for(var t=-1,e=this.themeNameArray.length,o=0;o<e;o++)if(-1!==document.body.className.indexOf(this.themeNameArray[o])){t=o;break}return t},e.currentThemeName.get=function(){return this.themeNameArray[this.currentThemeIdx]},t.prototype.isThemeEnabledValidationFromName=function(t){return t===this.currentThemeName},Object.defineProperties(t.prototype,e),t}();
